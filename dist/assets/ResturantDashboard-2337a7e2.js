import{i as q,j as e,k as V,r as v,l as $,m as I,n as D,o as Y}from"./index-cee91fc7.js";import{u as y,c as g,a as r,h as o,b as A}from"./handleClasses-d31b0312.js";const U=()=>{const[u,{isSuccess:x}]=q(),t=y({initialValues:{mobile:"",address:"",city:"",certificate:"",type:"",hero:"",startTime:"",endTime:""},validationSchema:g({mobile:r().required("Enter  mobile"),address:r().required("Enter  address"),city:r().required("Enter  city"),certificate:r().required("Enter  certificate"),type:r().required("Enter  type"),hero:r().required("Enter  hero"),startTime:r().required("Enter  startTime"),endTime:r().required("Enter  endTime")}),onSubmit:(d,{resetForm:l})=>{const j=new FormData;for(const b in d)j.append(b,d[b]);u(j),l()}});return e.jsx("form",{onSubmit:t.handleSubmit,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Signup"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"mobile",className:"form-label",children:" mobile"}),e.jsx("input",{...t.getFieldProps("mobile"),type:"text",className:o(t,"mobile"),id:"mobile",placeholder:"enter Your mobile"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.mobile})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"address",className:"form-label",children:" address"}),e.jsx("textarea",{...t.getFieldProps("address"),type:"text",className:o(t,"address"),id:"address",placeholder:"Enter Your address"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.address})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"city",className:"form-label",children:" city"}),e.jsx("input",{...t.getFieldProps("city"),type:"text",className:o(t,"city"),id:"city",placeholder:"Enter Your city"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.city})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"certificate",className:"form-label",children:" certificate"}),e.jsx("input",{type:"file",onChange:d=>t.setFieldValue("certificate",d.target.files[0]),className:o(t,"certificate"),id:"certificate",placeholder:"Enter Your certificate"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.certificate})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"type",className:"form-label",children:" type"}),e.jsxs("select",{...t.getFieldProps("type"),className:o(t,"type"),children:[e.jsx("option",{selected:!0,children:"Choose Type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.type})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"hero",className:"form-label",children:" hero"}),e.jsx("input",{type:"file",onChange:d=>t.setFieldValue("hero",d.target.files[0]),className:o(t,"hero"),id:"hero",placeholder:"Confirm Your hero"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.hero})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"startTime",className:"form-label",children:" startTime"}),e.jsx("input",{...t.getFieldProps("startTime"),type:"time",className:o(t,"startTime"),id:"startTime",placeholder:"Confirm Your startTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.startTime})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"endTime",className:"form-label",children:" endTime"}),e.jsx("input",{...t.getFieldProps("endTime"),type:"time",className:o(t,"endTime"),id:"endTime",placeholder:"Confirm Your endTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:t.errors.endTime})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Update Info"})]})]})})})})})},_=()=>{const[u,{data:x}]=V(),[t,d]=v.useState(!0),[l,j]=v.useState(),[b,{isSuccess:z,isLoading:G}]=$(),[P,{isSuccess:Q,isLoading:H}]=q(),[L,{isSuccess:J,isError:K,isLoading:O,error:W}]=I();v.useState([1]);const a=y({initialValues:{menu:[{type:"",category:"",name:"poha",price:"",desc:"",image:""}]},validationSchema:g({menu:A().of(g({type:r().required("Enter type"),category:r().required("Enter category"),name:r().required("Enter name"),price:r().required("Enter price"),desc:r().required("Enter desc"),image:r().required("Enter image")}))}),onSubmit:(n,{resetForm:s})=>{const i=new FormData;for(const c of n.menu)for(const p in c)i.append(p,c[p]);L(i),s()}}),m=y({enableReinitialize:!0,initialValues:{type:l?l.type:"",category:l?l.category:"",name:l?l.name:"",price:l?l.price:"",desc:l?l.desc:"",image:l?l.image:""},validationSchema:g({type:r().required("Enter type"),category:r().required("Enter category"),name:r().required("Enter name"),price:r().required("Enter price"),desc:r().required("Enter desc"),image:r()}),onSubmit:(n,{resetForm:s})=>{const i=new FormData;for(const c in n)i.append(c,n[c]);P({fd:i,_id:l._id}),s()}}),w=()=>{a.setFieldValue("menu",[...a.values.menu,{type:"",category:"",name:"",price:"",desc:"",image:""}])},R=n=>{const s=[...a.values.menu];s.splice(n,1),a.setFieldValue("menu",s)},h=(n,s)=>{var i,c,p,f,N,C,k,E,F,M,S,T;return D({"form-control my-2":!0,"is-invalid":((i=a.touched)==null?void 0:i.menu)&&((p=(c=a.touched)==null?void 0:c.menu[n])==null?void 0:p[s])&&((f=a.errors)==null?void 0:f.menu)&&((C=(N=a.errors)==null?void 0:N.menu[n])==null?void 0:C[s]),"is-valid":((k=a.touched)==null?void 0:k.menu)&&((F=(E=a.touched)==null?void 0:E.menu[n])==null?void 0:F[s])&&((M=a.errors)==null?void 0:M.menu)&&!((T=(S=a.errors)==null?void 0:S.menu[n])!=null&&T[s])})},B=(n,s)=>{const{files:i}=s.target;a.setFieldValue(`menu[${n}].image`,i[0])};return v.useEffect(()=>{u()},[]),e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:a.handleSubmit,children:e.jsxs("div",{className:"container",children:[a.values.menu.map((n,s)=>e.jsxs("div",{className:"card my-3",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsxs("span",{children:["Menu ",s+1]}),s===0?e.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:w,children:"Add more"}):e.jsx("button",{type:"button",className:"btn btn-danger",onClick:i=>R(s),children:"Remove"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row mx-2",children:[e.jsx("div",{className:"col-sm-4 mt-2",children:e.jsxs("select",{name:`menu[${s}].category`,onBlur:a.handleBlur,onChange:a.handleChange,value:a.values.menu[s].category,className:h(s,"category"),children:[e.jsx("option",{selected:!0,children:"Choose catergory"}),e.jsx("option",{value:"main-course",children:"Maain Course"}),e.jsx("option",{value:"Chinease",children:"Chinease"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-4  mt-2",children:e.jsxs("select",{name:`menu[${s}].type`,onBlur:a.handleBlur,onChange:a.handleChange,value:a.values.menu[s].type,className:h(s,"type"),children:[e.jsx("option",{selected:!0,children:"Choose Type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-4  mt-2",children:e.jsx("input",{type:"text",name:`menu[${s}].name`,onBlur:a.handleBlur,onChange:a.handleChange,className:h(s,"name"),placeholder:"Enter dish Name",defaultValue:a.values.menu[s].name})}),e.jsx("div",{className:"col-sm-4  mt-2",children:e.jsx("input",{name:`menu[${s}].price`,onBlur:a.handleBlur,onChange:a.handleChange,type:"text",className:h(s,"price"),placeholder:"Enter price",value:a.values.menu[s].price})}),e.jsx("div",{className:"col-sm-4  mt-2",children:e.jsx("textarea",{name:`menu[${s}].desc`,onBlur:a.handleBlur,onChange:a.handleChange,className:h(s,"desc"),value:a.values.menu[s].desc,id:"id",children:"Description"})}),e.jsx("div",{className:"col-sm-4  mt-2",children:e.jsx("input",{type:"file",className:h(s,"image"),placeholder:"Enter image",onChange:i=>B(s,i)})})]})})]})),e.jsx("button",{type:"submit",className:"btn btn-primary my-3 w-100 btn-lg",children:"Add Menu"})]})}),e.jsx("div",{className:"container",children:x&&e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:x.result.map(n=>e.jsxs("tr",{className:`${n.type==="veg"?"table-success":"table-danger"}`,children:[e.jsx("td",{children:n.type}),e.jsx("td",{children:n.category}),e.jsx("td",{children:n.name}),e.jsx("td",{children:n.price}),e.jsx("td",{children:n.desc}),e.jsx("td",{children:e.jsx("img",{src:n.image,height:100,width:100,alt:""})}),e.jsxs("td",{children:[e.jsx("button",{type:"button",onClick:s=>j(n),"data-bs-toggle":"modal","data-bs-target":"#editMenu",className:"btn btn-outline-success",children:"Edit"}),e.jsx("button",{onClick:s=>b(n._id),type:"button",className:"btn btn-outline-danger",children:"Remove"})]})]},n.id))})]})}),e.jsx("div",{class:"modal fade",id:"editMenu",children:e.jsx("div",{class:"modal-dialog",children:e.jsxs("div",{class:"modal-content",children:[e.jsxs("div",{class:"modal-header",children:[e.jsx("h5",{class:"modal-title",id:"exampleModalLabel",children:"Modal title"}),e.jsx("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{class:"modal-body",children:e.jsxs("form",{onSubmit:m.handleSubmit,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{className:"form-control my-2",...m.getFieldProps("type"),children:[e.jsx("option",{selected:!0,children:"Choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{...m.getFieldProps("category"),className:"form-control my-2",children:[e.jsx("option",{selected:!0,children:"Choose category"}),e.jsx("option",{value:"Main",children:"Main Course"}),e.jsx("option",{value:"Chinese",children:"Chinese"}),e.jsx("option",{value:"Punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{...m.getFieldProps("name"),className:"form-control my-2",placeholder:"Enter dish name",type:"text"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{...m.getFieldProps("price"),className:"form-control my-2",placeholder:"Enter dish price",type:"text"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("textarea",{...m.getFieldProps("desc"),className:"form-control my-2",placeholder:"desc"})}),e.jsx("div",{className:"col-sm-6",children:t?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l&&l.image,height:50,alt:""}),e.jsx("button",{onClick:n=>d(!1),type:"button",class:"btn btn-primary btn-sm",children:"Change"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{onChange:n=>m.setFieldValue("image",n.target.files[0]),className:"form-control my-2",type:"file"}),e.jsx("button",{onClick:n=>d(!0),type:"button",class:"btn btn-primary btn-sm",children:"Cancel"})]})})]}),e.jsx("button",{type:"submit",className:"btn btn-warning w-100",children:"Update Menu"})]})})]})})})]})},ee=()=>{const{resturant:u}=Y(x=>x.auth);return e.jsx(e.Fragment,{children:u.infoComplete?e.jsx(_,{}):e.jsx(U,{})})};export{ee as default};
