import{u as m,a as x,r as d,b as p,s as l,y as u,j as s}from"./index-cee91fc7.js";const f=()=>{const[j,{isSuccess:n}]=m(),{data:c}=x(),[r,o]=d.useState({limit:2,skip:0}),[i,{data:a,isSuccess:h,isLoading:b}]=p();return l.on("place-order",e=>{i(r)}),l.on("status-update",e=>{i(r)}),l.on("changed-order-status",e=>{i(r)}),d.useEffect(()=>{n&&u.success("rider assign success")},[n]),d.useEffect(()=>{i(r)},[r]),d.useEffect(()=>{h&&u.success("order fetch success")},[h]),s.jsxs("div",{className:" container mt-5",children:[s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-sm-4",children:s.jsxs("select",{className:"form-select my-3",value:r.limit,onChange:e=>o({limit:e.target.value,skip:0}),children:[s.jsx("option",{selected:!0,children:"Choose limit"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"5",children:"5"}),s.jsx("option",{value:"10",children:"10"})]})})}),a&&s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Customer Name"}),s.jsx("th",{children:"Customer Mobile"}),s.jsx("th",{children:"Resturant Name"}),s.jsx("th",{children:"Resturant Mobile"}),s.jsx("th",{children:"Dish Name"}),s.jsx("th",{children:"Order Status"})]})}),s.jsxs("tbody",{children:[a.orders.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.customer.name}),s.jsx("td",{children:e.customer.mobile}),s.jsx("td",{children:e.resturant.name}),s.jsx("td",{children:e.resturant.mobile}),s.jsx("td",{children:e.items.map(t=>s.jsx("div",{children:s.jsxs("div",{className:"d-block",children:[t.qty," X ",t.dish.name," X ",t.dish.price]})}))}),s.jsx("td",{children:e.status}),s.jsx("td",{children:e.rider?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[" ",s.jsx("strong",{children:e.rider.name})," "]}),s.jsxs("div",{children:[" ",s.jsx("strong",{children:e.rider.mobile})," "]})]}):s.jsxs("select",{onChange:t=>j({_id:e._id,rider:t.target.value}),className:"form-select",children:[s.jsx("option",{selected:!0,children:"Choose Rider"}),c&&c.result.map(t=>s.jsx("option",{value:t._id,children:t.name},t._id))]})})]},e.id)),a&&[...Array(Math.ceil(a.total/r.limit))].map((e,t)=>s.jsx("button",{type:"button",className:`btn btn-sm me-1 m-1 ${t*r.limit===r.skip?"btn-info":"btn-outline-info"}`,onClick:g=>o({...r,skip:t*r.limit}),children:t}))]})]})]})};export{f as default};
